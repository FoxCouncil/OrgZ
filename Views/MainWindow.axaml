<Window xmlns="https://github.com/avaloniaui"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
		xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		xmlns:i="https://github.com/projektanker/icons.avalonia"
		xmlns:controls="using:OrgZ.Controls"
		xmlns:converters="clr-namespace:OrgZ.Converters"
		mc:Ignorable="d" d:DesignWidth="1024" d:DesignHeight="450"
		x:Class="OrgZ.Views.MainWindow"
		Title="OrgZ"
		x:CompileBindings="False">
	<Window.Resources>
		<converters:FileSizeConverter x:Key="FileSizeConverter" />
	</Window.Resources>

	<Window.Styles>
		<Style Selector="Button">
			<Setter Property="Background" Value="{DynamicResource SystemChromeGrayColor}"/>
		</Style>

		<Style Selector="Slider:horizontal">
			<Setter Property="MinHeight" Value="14" />
			<Setter Property="Margin" Value="0,-2,0,0" />
			<Setter Property="Padding" Value="0" />

			<!-- Track background -->
			<Setter Property="Background" Value="{DynamicResource SystemControlBackgroundBaseLowBrush}" />

			<Style Selector="^ Track">
				<Setter Property="Height" Value="14" />
				<Setter Property="Margin" Value="0" />

				<!-- Playback head -->
				<Style Selector="^ Thumb">
					<Setter Property="Width" Value="14" />
					<Setter Property="Height" Value="14" />
					<Setter Property="CornerRadius" Value="0" />
					<Setter Property="Background" Value="{DynamicResource SystemControlForegroundBaseHighBrush}" />
					<Setter Property="BorderBrush" Value="{DynamicResource SystemControlHighlightAccentBrush}" />
					<Setter Property="BorderThickness" Value="1" />
					<Setter Property="Margin" Value="0" />
					<Setter Property="Padding" Value="0" />
				</Style>
			</Style>
		</Style>
	</Window.Styles>

	<Grid RowDefinitions="Auto,*,Auto" ColumnDefinitions="Auto,*,Auto,Auto,*,Auto">
		<Grid.Background>
			<ImageBrush Source="avares://Orgz/Assets/metal.png" Opacity=".7" TileMode="Tile" Stretch="Fill" AlignmentX="Left" AlignmentY="Top" DestinationRect="0,0,128,128" />
		</Grid.Background>
		<Grid.Styles>
			<Style Selector="ContentPresenter, TextBlock, TextBox">
				<Setter Property="TextElement.FontFamily" Value="Consolas"/>
			</Style>
		</Grid.Styles>

		<Border Grid.Row="0" Grid.Column="0" Margin="25,4,4,4" >
			<StackPanel HorizontalAlignment="Center">
				<StackPanel Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="5">
					<Button IsEnabled="{Binding IsBackTrackButtonEnabled}" Width="50" Height="50" FontSize="28" CornerRadius="100" i:Attached.Icon="fa-solid fa-backward-fast" Command="{Binding ButtonPreviousTrack}"></Button>
					<Button IsEnabled="{Binding IsButtonPlayPauseEnabled}" Width="64" Height="64" FontSize="42" CornerRadius="100" i:Attached.Icon="{Binding ButtonPlayPauseIcon}" Command="{Binding ButtonPlayPause}" Padding="{Binding ButtonPlayPausePadding}"></Button>
					<Button IsEnabled="{Binding IsNextTrackButtonEnabled}" Width="50" Height="50" FontSize="28" CornerRadius="100" i:Attached.Icon="fa-solid fa-forward-fast" Command="{Binding ButtonNextTrack}"></Button>
				</StackPanel>
				<StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,0,5">
					<i:Icon Value="fa-solid fa-volume-low" Margin="0,0,5,0" />
					<Slider Minimum="0" Maximum="100" Value="{Binding CurrentVolume, Mode=TwoWay}" ValueChanged="Slider_ValueChanged" VerticalAlignment="Center" Width="80" Height="18" Padding="0,-9,0,0" />
					<i:Icon Value="fa-solid fa-volume-high" Margin="5,0,0,0" />
				</StackPanel>
			</StackPanel>
		</Border>
		<Border Grid.Row="0" Grid.Column="2" Margin="4" VerticalAlignment="Center">
			<Border Background="{DynamicResource SystemChromeGrayColor}" CornerRadius="6" Width="75" Height="75" ClipToBounds="True">
				<Panel>
					<Image Source="{Binding CurrentAlbumArt}" Stretch="UniformToFill" IsVisible="{Binding CurrentAlbumArt, Converter={x:Static ObjectConverters.IsNotNull}}" />
					<i:Icon Value="fa-solid fa-music" FontSize="28" HorizontalAlignment="Center" VerticalAlignment="Center" IsVisible="{Binding CurrentAlbumArt, Converter={x:Static ObjectConverters.IsNull}}" Opacity="0.4" />
				</Panel>
			</Border>
		</Border>
		<Border Grid.Row="0" Grid.Column="3" Margin="4">
			<Border Background="{DynamicResource SystemChromeGrayColor}" CornerRadius="15" Height="75">
				<StackPanel VerticalAlignment="Center">
					<StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="10,0,10,5">
						<TextBlock Text="{Binding CurrentTrackMetadata}" FontSize="16" FontWeight="Bold" />
					</StackPanel>
					<StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="10,5,10,0" Spacing="12">
						<TextBlock VerticalAlignment="Center" Text="{Binding CurrentTrackTime}" FontSize="16" FontWeight="Bold" />
						<Slider x:Name="CurrentTimeSlider" Minimum="0" Maximum="{Binding CurrentTrackDurationNumber}" Value="{Binding CurrentTrackTimeNumber, Mode=TwoWay}" VerticalAlignment="Center" Width="420" Height="14" Padding="0,-12,0,0" />
						<TextBlock VerticalAlignment="Center" Text="{Binding CurrentTrackDuration}" FontSize="16" FontWeight="Bold" />
					</StackPanel>
				</StackPanel>
			</Border>
		</Border>
		<Border Grid.Row="0" Grid.Column="5" Margin="4,4,25,4">
			<StackPanel Orientation="Horizontal" VerticalAlignment="Center">
				<i:Icon Value="fa-solid fa-search" Margin="10,10,5,10" />
				<TextBox Width="200" Watermark="Search..." Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}" Margin="5,10,10,10" />
			</StackPanel>
		</Border>

		<DataGrid x:Name="MainDataGrid" Grid.Row="1" Grid.ColumnSpan="6" Margin="4"
				DoubleTapped="DataGrid_DoubleTapped"
				SelectedItem="{Binding SelectedAudioFile, Mode=TwoWay}"
				ItemsSource="{Binding FilteredAudioFiles}"
				GridLinesVisibility="All"
				IsReadOnly="True"
				AutoGenerateColumns="False"
				CanUserSortColumns="True"
				SelectionMode="Single"
				Background="{DynamicResource SystemAltHighColor}">
			<DataGrid.ContextMenu>
				<ContextMenu>
					<MenuItem Header="{Binding #MainDataGrid.SelectedItem.Title, FallbackValue='(No Title)'}" FontWeight="Bold" IsHitTestVisible="False" />
					<MenuItem Header="{Binding #MainDataGrid.SelectedItem.Artist, FallbackValue='(No Artist)'}" IsHitTestVisible="False" FontStyle="Italic" />
					<Separator />
					<MenuItem Header="Play" Click="ContextMenu_Play" />
					<MenuItem Header="Play Next" IsEnabled="False" />
					<MenuItem Header="Add to Queue" IsEnabled="False" />
					<Separator />
					<MenuItem Header="Get Info" IsEnabled="False" />
					<MenuItem Header="Rating" IsEnabled="False">
						<MenuItem Header="1 Star" IsEnabled="False" />
						<MenuItem Header="2 Stars" IsEnabled="False" />
						<MenuItem Header="3 Stars" IsEnabled="False" />
						<MenuItem Header="4 Stars" IsEnabled="False" />
						<MenuItem Header="5 Stars" IsEnabled="False" />
					</MenuItem>
					<MenuItem Header="Add to Playlist" IsEnabled="False">
						<MenuItem Header="New Playlist..." IsEnabled="False" />
					</MenuItem>
					<Separator />
					<MenuItem Header="Show in Explorer" IsEnabled="False" />
					<MenuItem Header="Remove from Library" IsEnabled="False" />
				</ContextMenu>
			</DataGrid.ContextMenu>
			<DataGrid.Styles>
				<Style Selector="DataGridRow">
					<Setter Property="Background" Value="{DynamicResource SystemControlForegroundBaseMediumLowBrush}" />
				</Style>
				<Style Selector="DataGridRow:nth-child(odd)">
					<Setter Property="Background" Value="{DynamicResource SystemControlBackgroundBaseLowBrush}" />
				</Style>
				<Style Selector="DataGridCell:focus /template/ Grid#FocusVisual">
					<Setter Property="IsVisible" Value="False" />
				</Style>
			</DataGrid.Styles>
			<DataGrid.Columns>
				<DataGridTemplateColumn Header="" Width="30" CanUserSort="False" CanUserResize="False" CanUserReorder="False">
					<DataGridTemplateColumn.CellTemplate>
						<DataTemplate>
							<i:Icon Value="fa-solid fa-play" FontSize="14" IsVisible="{Binding IsPlaying}" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="#0096FF" />
						</DataTemplate>
					</DataGridTemplateColumn.CellTemplate>
				</DataGridTemplateColumn>
				<DataGridTextColumn Header="Title" Binding="{Binding Title}" Width="*" />
				<DataGridTextColumn Header="Artist" Binding="{Binding Artist}" Width="*" />
				<DataGridTextColumn Header="Album" Binding="{Binding Album}" Width="*" />
				<DataGridTextColumn Header="Year" Binding="{Binding Year}" Width="Auto" />
				<DataGridTextColumn Header="Extension" Binding="{Binding Extension}" Width="Auto" />
				<DataGridCheckBoxColumn Header="Has Album Art" Binding="{Binding HasAlbumArt}" Width="Auto" />
			</DataGrid.Columns>
		</DataGrid>

		<controls:StatusBar Grid.Row="2" Grid.ColumnSpan="6" DataContext="{Binding StatusBar}" />
	</Grid>
</Window>
